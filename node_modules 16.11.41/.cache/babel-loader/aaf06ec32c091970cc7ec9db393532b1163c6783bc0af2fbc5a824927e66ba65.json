{"ast":null,"code":"import React,{useState,useEffect}from'react';// Importera React och hooks\nimport{BrowserRouter as Router,Routes,Route,Link}from'react-router-dom';// Importera routing-komponenter\nimport{onAuthStateChanged,signOut}from'firebase/auth';// Importera auth-funktioner från Firebase\nimport{auth}from'./firebaseConfig';// Firebase auth inställning (ska vara rätt importerad)\nimport HistoryPage from'./HistoryPage';// Importera HistoryPage-komponenten\nimport AudioUploader from'./AudioUploader';// Importera AudioUploader-komponenten\nimport AuthModal from'./AuthModal';// Importera AuthModal-komponenten\nimport Home from'./Home';// Importera Home-komponenten\nimport{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const App=()=>{const[isAuthenticated,setIsAuthenticated]=useState(false);const[currentScreen,setCurrentScreen]=useState(null);const[showAuthModal,setShowAuthModal]=useState(false);const[loading,setLoading]=useState(true);const[user,setUser]=useState(null);// Använd useEffect för att hantera användarens autentisering\nuseEffect(()=>{const unsubscribe=onAuthStateChanged(auth,user=>{if(user){setIsAuthenticated(true);setUser(user);}else{setIsAuthenticated(false);setUser(null);}setLoading(false);});return()=>unsubscribe();// Rensa när komponenten tas bort\n},[]);const handleOpenAuthModal=mode=>{setCurrentScreen(mode);setShowAuthModal(true);};const handleCloseAuthModal=()=>{setShowAuthModal(false);};const handleLogout=async()=>{await signOut(auth);// Hantera utloggning från Firebase\n};const handleLoginSuccess=()=>{setShowAuthModal(false);};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"auth-buttons\",children:isAuthenticated?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"V\\xE4lkommen, \",user.displayName||'Användare']}),/*#__PURE__*/_jsx(\"button\",{className:\"logout\",onClick:handleLogout,children:\"Logga ut\"}),/*#__PURE__*/_jsx(Link,{to:\"/historik\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Visa Historik\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleOpenAuthModal('login'),children:\"Logga in\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleOpenAuthModal('register'),children:\"Registrera\"})]})}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Laddar...\"}):/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/historik\",element:/*#__PURE__*/_jsx(HistoryPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/inspelning\",element:/*#__PURE__*/_jsx(AudioUploader,{})}),\" \",/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})})]}),showAuthModal&&/*#__PURE__*/_jsx(AuthModal,{mode:currentScreen,onClose:handleCloseAuthModal})]})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Link","onAuthStateChanged","signOut","auth","HistoryPage","AudioUploader","AuthModal","Home","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","App","isAuthenticated","setIsAuthenticated","currentScreen","setCurrentScreen","showAuthModal","setShowAuthModal","loading","setLoading","user","setUser","unsubscribe","handleOpenAuthModal","mode","handleCloseAuthModal","handleLogout","handleLoginSuccess","children","className","displayName","onClick","to","path","element","onClose"],"sources":["/Users/hasansafiah/Desktop/projekt/git-test/Speech-AI-client/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'; // Importera React och hooks\nimport { BrowserRouter as Router, Routes, Route, Link } from 'react-router-dom'; // Importera routing-komponenter\nimport { onAuthStateChanged, signOut } from 'firebase/auth'; // Importera auth-funktioner från Firebase\nimport { auth } from './firebaseConfig'; // Firebase auth inställning (ska vara rätt importerad)\nimport HistoryPage from './HistoryPage'; // Importera HistoryPage-komponenten\nimport AudioUploader from './AudioUploader'; // Importera AudioUploader-komponenten\nimport AuthModal from './AuthModal'; // Importera AuthModal-komponenten\nimport Home from './Home'; // Importera Home-komponenten\n\nconst App = () => {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [currentScreen, setCurrentScreen] = useState(null);\n  const [showAuthModal, setShowAuthModal] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [user, setUser] = useState(null);\n\n  // Använd useEffect för att hantera användarens autentisering\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      if (user) {\n        setIsAuthenticated(true);\n        setUser(user);\n      } else {\n        setIsAuthenticated(false);\n        setUser(null);\n      }\n      setLoading(false);\n    });\n\n    return () => unsubscribe(); // Rensa när komponenten tas bort\n  }, []);\n\n  const handleOpenAuthModal = (mode) => {\n    setCurrentScreen(mode);\n    setShowAuthModal(true);\n  };\n\n  const handleCloseAuthModal = () => {\n    setShowAuthModal(false);\n  };\n\n  const handleLogout = async () => {\n    await signOut(auth); // Hantera utloggning från Firebase\n  };\n\n  const handleLoginSuccess = () => {\n    setShowAuthModal(false);\n  };\n\n  return (\n    <Router>\n      <div>\n        <div className=\"auth-buttons\">\n          {isAuthenticated ? (\n            <>\n              <span>Välkommen, {user.displayName || 'Användare'}</span>\n              <button className=\"logout\" onClick={handleLogout}>Logga ut</button>\n              <Link to=\"/historik\">\n                <button>Visa Historik</button>\n              </Link>\n              {/* Ta bort knappen för Spela in ljud */}\n              {/* <Link to=\"/inspelning\">\n                <button>Spela in ljud</button>\n              </Link> */}\n            </>\n          ) : (\n            <>\n              <button onClick={() => handleOpenAuthModal('login')}>Logga in</button>\n              <button onClick={() => handleOpenAuthModal('register')}>Registrera</button>\n            </>\n          )}\n        </div>\n\n        {loading ? (\n          <div>Laddar...</div>\n        ) : (\n          <Routes>\n            <Route path=\"/historik\" element={<HistoryPage />} />\n            <Route path=\"/inspelning\" element={<AudioUploader />} /> {/* Route för AudioUploader */}\n            <Route path=\"/\" element={<Home />} />\n          </Routes>\n        )}\n\n        {showAuthModal && (\n          <AuthModal mode={currentScreen} onClose={handleCloseAuthModal} />\n        )}\n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}